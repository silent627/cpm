# 前端项目手动启动命令

## 前端项目位置
- **主要目录**: `src/main/resources/frontend/`
- **备用目录**: `cpm-gateway/src/main/resources/static/frontend/`

## 完整启动步骤

### 1. 进入前端项目目录

```bash
cd "G:\Graduation Project\cpm\src\main\resources\frontend"
```

### 2. 检查Node.js和npm版本

```bash
node -v
npm -v
```

**要求**：
- Node.js: 16.0 或更高版本
- npm: 8.0 或更高版本

### 3. 安装依赖（首次启动或依赖更新后）

```bash
npm install
```

### 4. 启动开发服务器

```bash
npm run dev
```

### 5. 访问前端应用

启动成功后，访问：
- **前端地址**: http://localhost:3000
- **后端API代理**: http://localhost:3000/api/* → http://localhost:8080/api/*

---

## 一键启动命令（Windows CMD）

```cmd
cd /d "G:\Graduation Project\cpm\src\main\resources\frontend" && npm install && npm run dev
```

## 一键启动命令（PowerShell）

```powershell
cd "G:\Graduation Project\cpm\src\main\resources\frontend"; npm install; npm run dev
```

---

## 其他常用命令

### 构建生产版本

```bash
npm run build
```

构建后的文件会输出到 `dist/` 目录

### 预览生产构建

```bash
npm run preview
```

### 清理node_modules（如遇到依赖问题）

```bash
# 删除node_modules和package-lock.json
rmdir /s /q node_modules
del package-lock.json

# 重新安装
npm install
```

---

## 配置说明

### Vite配置（vite.config.js）

- **开发服务器端口**: 3000
- **API代理**: `/api` → `http://localhost:8080/api`
- **文件上传代理**: `/uploads` → `http://localhost:8080/uploads`

### 修改端口（如果需要）

编辑 `vite.config.js`：

```javascript
server: {
  port: 3001,  // 修改为你想要的端口
  // ...
}
```

---

## 常见问题

### 1. 端口被占用

如果3000端口被占用，Vite会自动尝试下一个可用端口（3001, 3002...）

### 2. 依赖安装失败

```bash
# 清除npm缓存
npm cache clean --force

# 使用国内镜像（可选）
npm config set registry https://registry.npmmirror.com

# 重新安装
npm install
```

### 3. 后端API连接失败

确保：
- 后端服务已启动（http://localhost:8080）
- Gateway服务正常运行
- 检查 `vite.config.js` 中的代理配置

### 4. 热更新不工作

```bash
# 重启开发服务器
# 按 Ctrl+C 停止，然后重新运行
npm run dev
```

---

## 启动检查清单

- [ ] Node.js已安装（16.0+）
- [ ] npm已安装（8.0+）
- [ ] 已进入前端项目目录
- [ ] 已安装依赖（npm install）
- [ ] 后端服务已启动（http://localhost:8080）
- [ ] 端口3000未被占用

---

## 快速启动脚本

创建 `启动前端.bat` 文件：

```batch
@echo off
echo ====================================
echo 启动前端项目
echo ====================================
cd /d "G:\Graduation Project\cpm\src\main\resources\frontend"
echo 当前目录: %CD%
echo.
echo 检查Node.js版本...
node -v
echo.
echo 安装依赖...
call npm install
echo.
echo 启动开发服务器...
call npm run dev
pause
```

保存后双击运行即可。
